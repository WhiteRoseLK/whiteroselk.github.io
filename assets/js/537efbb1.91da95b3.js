"use strict";(self.webpackChunkevantay_com=self.webpackChunkevantay_com||[]).push([[232],{4562:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=t(4848),a=t(8453);const o={title:"HomePage dashboard",author:"Mathieu Bannwarth",author_url:"https://github.com/WhiteRoseLK/",author_title:"Cybersecurity IT engineer",author_image_url:"https://avatars.githubusercontent.com/u/50756181"},s=void 0,i={id:"homelab/2024-05-31-HomePage",title:"HomePage dashboard",description:"J'ai d\xe9j\xe0 en t\xeate un certain nombres de services que je vais d\xe9ployer dans ce HomeLab alors pour ne pas me perdre dans tout les services, je vais commencer par d\xe9ployer Homepage.",source:"@site/docs/homelab/2024-05-31-HomePage.md",sourceDirName:"homelab",slug:"/homelab/2024-05-31-HomePage",permalink:"/docs/homelab/2024-05-31-HomePage",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"HomePage dashboard",author:"Mathieu Bannwarth",author_url:"https://github.com/WhiteRoseLK/",author_title:"Cybersecurity IT engineer",author_image_url:"https://avatars.githubusercontent.com/u/50756181"},sidebar:"docsSidebar",previous:{title:"Proxmox, cr\xe9ation d'un template packer",permalink:"/docs/homelab/2024-05-26-Proxmox-Template-Packer copy"},next:{title:"PiHole DNS et Ad block",permalink:"/docs/homelab/2024-05-31-PiHole"}},m={},c=[{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2}];function l(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"J'ai d\xe9j\xe0 en t\xeate un certain nombres de services que je vais d\xe9ployer dans ce HomeLab alors pour ne pas me perdre dans tout les services, je vais commencer par d\xe9ployer Homepage."}),"\n",(0,r.jsx)(n.p,{children:"Homepage est un dashboard qui permet d'avoir en un coup d'oeil un aper\xe7u de certaines informations sur votre Lab mais aussi les liens pour ouvrir chaque application."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"Le r\xf4le ansible est tr\xe8s basique, il permet de d\xe9ployer Homepage et de le transformer en service :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-YAML",metastring:'title="roles/Homepage/tasks/main.yml"',children:'---\n# tasks file for Homepage\n- name: Clone repository\n  git:\n    repo: https://github.com/gethomepage/homepage.git\n    dest: "{{ Homepage_WorkingDirectory }}"\n\n- name: Prevent git directory ownership error\n  command: git config --global --add safe.directory /opt/Homepage\n\n- name: Install npm package\n  apt:\n    name: npm\n    state: present\n\n- name: Ajout user Homepage\n  user:\n    name: "{{ Homepage_user }}"\n\n- name: Change ownership of Homepage dir\n  file:\n    path: "{{ Homepage_WorkingDirectory }}"\n    state: directory\n    recurse: yes\n    owner: "{{ Homepage_user }}"\n    group: "{{ Homepage_user }}"\n\n- name: Run npm install\n  community.general.npm:\n    path: "{{ Homepage_WorkingDirectory }}"\n\n- name: Build npm package\n  command: npm run build\n  args:\n    chdir: "{{ Homepage_WorkingDirectory }}"\n\n- name: Create Homepage.service\n  template:\n    src: homepage.service.j2\n    dest: /lib/systemd/system/homepage.service\n    mode: 644\n\n- name: Enable and start Homepage.service\n  systemd_service:\n    name: homepage\n    state: started\n    daemon_reload: true\n    enabled: true\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-YAML",metastring:'title="roles/Homepage/templates/homepage.service.j2"',children:"[Unit]\nDescription=Homepage service\nAfter=network.target\nStartLimitIntervalSec=0\n[Service]\nType=simple\nRestart=always\nRestartSec=1\nUser={{ Homepage_user }}\nWorkingDirectory= {{ Homepage_WorkingDirectory }}\nExecStart=/usr/bin/npm start\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Une fois d\xe9ploy\xe9, le service est disponible sur le port ",(0,r.jsx)(n.strong,{children:"3000"})]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var r=t(6540);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);